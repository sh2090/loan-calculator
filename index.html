<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Universal Finance Pro | Calculate EMI, Tenure, or Loan</title>
    <style>
        :root {
            --primary: #1e293b;
            --accent: #3b82f6;
            --success: #10b981;
            --card-bg: #ffffff;
        }
        body { font-family: 'Inter', system-ui, sans-serif; background: #f1f5f9; padding: 40px 20px; display: flex; flex-direction: column; align-items: center; }
        .wrapper { width: 100%; max-width: 500px; }
        
        /* THE UI CARD */
        .calc-card { background: var(--card-bg); padding: 35px; border-radius: 24px; box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1); }
        
        h2 { text-align: center; margin-bottom: 5px; color: var(--primary); }
        p.subtitle { text-align: center; color: #64748b; font-size: 0.9rem; margin-bottom: 25px; }

        /* GOAL SELECTOR */
        .goal-selector { display: flex; background: #f1f5f9; padding: 5px; border-radius: 12px; margin-bottom: 25px; }
        .goal-btn { flex: 1; border: none; padding: 10px; border-radius: 8px; cursor: pointer; font-size: 0.85rem; font-weight: 600; color: #64748b; transition: 0.3s; }
        .goal-btn.active { background: white; color: var(--accent); box-shadow: 0 4px 6px rgba(0,0,0,0.05); }

        /* INPUTS */
        .input-group { margin-bottom: 20px; }
        label { display: block; font-size: 0.85rem; font-weight: 700; margin-bottom: 8px; color: #475569; }
        .input-field { position: relative; }
        .input-field span { position: absolute; left: 15px; top: 12px; color: #94a3b8; font-weight: bold; }
        input { width: 100%; padding: 12px 15px 12px 35px; border: 2px solid #e2e8f0; border-radius: 10px; font-size: 1rem; box-sizing: border-box; outline: none; transition: 0.2s; }
        input:focus { border-color: var(--accent); }
        .hidden { display: none; }

        button.main-btn { width: 100%; padding: 16px; background: var(--accent); color: white; border: none; border-radius: 10px; font-size: 1rem; font-weight: 700; cursor: pointer; margin-top: 10px; }
        
        /* RESULTS */
        .results { margin-top: 30px; padding: 25px; background: var(--primary); border-radius: 16px; color: white; display: none; }
        .res-top { text-align: center; border-bottom: 1px solid #334155; padding-bottom: 15px; margin-bottom: 15px; }
        .res-top small { color: #94a3b8; text-transform: uppercase; font-size: 0.7rem; letter-spacing: 1px; }
        .res-top h2 { color: var(--success); margin: 5px 0; font-size: 2rem; }
        .res-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .res-item small { color: #94a3b8; display: block; font-size: 0.7rem; }
        .res-item b { font-size: 1rem; }

        footer { margin-top: 30px; text-align: center; font-size: 0.8rem; color: #64748b; }
        footer a { color: var(--accent); text-decoration: none; }
    </style>
</head>
<body>

<div class="wrapper">
    <div class="calc-card">
        <h2>Smart Financial Tool</h2>
        <p class="subtitle">What would you like to calculate today?</p>

        <div class="goal-selector">
            <button class="goal-btn active" onclick="setGoal('emi', this)">Monthly EMI</button>
            <button class="goal-btn" onclick="setGoal('amount', this)">Loan Amount</button>
            <button class="goal-btn" onclick="setGoal('tenure', this)">Tenure</button>
        </div>

        <div id="grp-amount" class="input-group">
            <label>Total Loan Amount</label>
            <div class="input-field"><span>$</span><input type="number" id="val-amount" placeholder="e.g. 1,000,000"></div>
        </div>

        <div class="input-group">
            <label>Interest Rate (% Annual)</label>
            <div class="input-field"><span>%</span><input type="number" id="val-interest" step="0.01" placeholder="e.g. 7.5"></div>
        </div>

        <div id="grp-tenure" class="input-group">
            <label>Tenure (Years)</label>
            <div class="input-field"><span>Y</span><input type="number" id="val-tenure" placeholder="e.g. 20"></div>
        </div>

        <div id="grp-emi" class="input-group hidden">
            <label>Desired Monthly Payment</label>
            <div class="input-field"><span>$</span><input type="number" id="val-emi" placeholder="e.g. 5,000"></div>
        </div>

        <button class="main-btn" onclick="performMagic()">Calculate Now</button>

        <div id="res-box" class="results">
            <div class="res-top">
                <small id="res-label">Monthly EMI</small>
                <h2 id="res-main">$0.00</h2>
            </div>
            <div class="res-grid">
                <div class="res-item">
                    <small>Total Interest</small>
                    <b id="res-interest">$0</b>
                </div>
                <div class="res-item">
                    <small>Total Payback</small>
                    <b id="res-total">$0</b>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>&copy; 2025 Smart Loan Calc | <a href="privacy.html">Privacy Policy</a></p>
    </footer>
</div>

<script>
    let currentGoal = 'emi';

    function setGoal(goal, btn) {
        currentGoal = goal;
        document.querySelectorAll('.goal-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

        // Logic to hide/show fields
        document.getElementById('grp-amount').classList.toggle('hidden', goal === 'amount');
        document.getElementById('grp-tenure').classList.toggle('hidden', goal === 'tenure');
        document.getElementById('grp-emi').classList.toggle('hidden', goal === 'emi');
        
        document.getElementById('res-box').style.display = 'none';
    }

    function performMagic() {
        const amt = parseFloat(document.getElementById('val-amount').value);
        const rate = parseFloat(document.getElementById('val-interest').value) / 1200;
        const years = parseFloat(document.getElementById('val-tenure').value);
        const emiIn = parseFloat(document.getElementById('val-emi').value);
        
        let finalMain, finalInt, finalTotal, mainLabel;
        const fmt = (v) => v.toLocaleString('en-US', {style: 'currency', currency: 'USD'});

        try {
            if (currentGoal === 'emi') {
                let n = years * 12;
                let emi = (amt * rate * Math.pow(1 + rate, n)) / (Math.pow(1 + rate, n) - 1);
                finalMain = fmt(emi);
                finalTotal = emi * n;
                finalInt = finalTotal - amt;
                mainLabel = "Estimated Monthly EMI";
            } 
            else if (currentGoal === 'amount') {
                let n = years * 12;
                let p = (emiIn * (Math.pow(1 + rate, n) - 1)) / (rate * Math.pow(1 + rate, n));
                finalMain = fmt(p);
                finalTotal = emiIn * n;
                finalInt = finalTotal - p;
                mainLabel = "Maximum Loan Amount";
            }
            else if (currentGoal === 'tenure') {
                // n = log(EMI/(EMI - P*r)) / log(1+r)
                let n = Math.log(emiIn / (emiIn - amt * rate)) / Math.log(1 + rate);
                let yrs = n / 12;
                finalMain = yrs.toFixed(1) + " Years (" + Math.round(n) + " Months)";
                finalTotal = emiIn * n;
                finalInt = finalTotal - amt;
                mainLabel = "Required Loan Tenure";
            }

            if (finalTotal > 0) {
                document.getElementById('res-main').innerText = finalMain;
                document.getElementById('res-interest').innerText = fmt(finalInt);
                document.getElementById('res-total').innerText = fmt(finalTotal);
                document.getElementById('res-label').innerText = mainLabel;
                document.getElementById('res-box').style.display = 'block';
            } else {
                alert("Please check your numbers. The interest or payment might be mathematically impossible.");
            }
        } catch (e) {
            alert("Calculation error. Please ensure all fields are positive.");
        }
    }
</script>
</body>
</html>
