<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartTool Hub | Loan, Image & PDF Toolkit</title>
    <meta name="description" content="Free online tools: Loan EMI calculator, Image compressor, and PDF merger. All-in-one professional toolkit.">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-YOUR_ID" crossorigin="anonymous"></script>
    
    <script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

    <style>
        :root { --primary: #0f172a; --accent: #2563eb; --bg: #f1f5f9; --text: #334155; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); margin: 0; display: flex; color: var(--text); }
        
        /* Sidebar Navigation */
        .sidebar { width: 260px; background: var(--primary); height: 100vh; color: white; position: fixed; padding: 20px; box-sizing: border-box; }
        .sidebar h2 { font-size: 1.2rem; margin-bottom: 30px; color: #38bdf8; }
        .nav-link { padding: 12px; display: block; color: #94a3b8; text-decoration: none; border-radius: 8px; margin-bottom: 10px; cursor: pointer; transition: 0.3s; }
        .nav-link:hover, .nav-link.active { background: #1e293b; color: white; }

        .main-content { margin-left: 260px; width: 100%; padding: 40px; box-sizing: border-box; }
        .tool-section { display: none; max-width: 700px; margin: 0 auto; }
        .tool-section.active { display: block; }

        .card { background: white; padding: 30px; border-radius: 16px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }
        .input-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: 600; }
        input, select { width: 100%; padding: 12px; border: 1px solid #e2e8f0; border-radius: 8px; }
        
        button { width: 100%; padding: 14px; background: var(--accent); color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; }
        .ad-slot { background: #e2e8f0; height: 90px; margin: 20px 0; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; }

        /* PDF Styles */
        .file-list { margin: 15px 0; font-size: 0.9rem; background: #f8fafc; padding: 10px; border-radius: 8px; }
    </style>
</head>
<body>

<div class="sidebar">
    <h2>SmartTool Hub</h2>
    <div class="nav-link active" onclick="showTool('loan', this)">üí∞ Loan Calculator</div>
    <div class="nav-link" onclick="showTool('image', this)">üñºÔ∏è Image Optimizer</div>
    <div class="nav-link" onclick="showTool('pdf', this)">üìÑ PDF Merger</div>
</div>

<div class="main-content">
    <div class="ad-slot">ADSENSE_TOP_UNIT</div>

    <div id="loan" class="tool-section active">
        <div class="card">
            <h2>Loan Calculator</h2>
            <div class="input-group">
                <label>Loan Amount ($)</label>
                <input type="number" id="l-amt" placeholder="1000000">
            </div>
            <div class="input-group">
                <label>Interest Rate (%)</label>
                <input type="number" id="l-rate" step="0.1" placeholder="7.5">
            </div>
            <div class="input-group">
                <label>Tenure (Years)</label>
                <input type="number" id="l-ten" placeholder="20">
            </div>
            <button onclick="calcLoan()">Calculate</button>
            <div id="loan-res" style="margin-top:20px; display:none; border-top:1px solid #eee; padding-top:20px;">
                <h3 id="emi-val" style="color:var(--accent); margin:0;"></h3>
                <p id="total-val" style="margin:5px 0;"></p>
            </div>
        </div>
    </div>

    <div id="image" class="tool-section">
        <div class="card">
            <h2>Image Compressor</h2>
            <label>Compression Level</label>
            <select id="img-quality" style="margin-bottom:20px;">
                <option value="0.7">Recommended (70%)</option>
                <option value="0.4">Smallest File (40%)</option>
            </select>
            <input type="file" id="img-in" accept="image/*" onchange="processImg()">
            <div id="img-preview" style="margin-top:20px;"></div>
        </div>
    </div>

    <div id="pdf" class="tool-section">
        <div class="card">
            <h2>Merge PDF Files</h2>
            <p>Select two or more PDF files to combine them into one.</p>
            <input type="file" id="pdf-in" accept="application/pdf" multiple style="margin-bottom:20px;">
            <div id="pdf-list" class="file-list">No files selected</div>
            <button onclick="mergePDFs()">Merge & Download PDF</button>
        </div>
    </div>

    <div class="ad-slot">ADSENSE_BOTTOM_UNIT</div>
</div>

<script>
    // Navigation Logic
    function showTool(id, el) {
        document.querySelectorAll('.tool-section').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.nav-link').forEach(n => n.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        el.classList.add('active');
    }

    // LOAN LOGIC
    function calcLoan() {
        const p = parseFloat(document.getElementById('l-amt').value);
        const r = parseFloat(document.getElementById('l-rate').value) / 1200;
        const n = parseFloat(document.getElementById('l-ten').value) * 12;
        const emi = (p * r * Math.pow(1 + r, n)) / (Math.pow(1 + r, n) - 1);
        
        document.getElementById('emi-val').innerText = "Monthly EMI: $" + emi.toLocaleString(undefined, {maximumFractionDigits:2});
        document.getElementById('total-val').innerText = "Total Payback: $" + (emi * n).toLocaleString();
        document.getElementById('loan-res').style.display = 'block';
    }

    // PDF MERGE LOGIC
    async function mergePDFs() {
        const files = document.getElementById('pdf-in').files;
        if (files.length < 2) { alert("Please select at least 2 PDF files"); return; }

        const mergedPdf = await PDFLib.PDFDocument.create();
        for (const file of files) {
            const content = await file.arrayBuffer();
            const pdf = await PDFLib.PDFDocument.load(content);
            const copiedPages = await mergedPdf.copyPages(pdf, pdf.getPageIndices());
            copiedPages.forEach((page) => mergedPdf.addPage(page));
        }

        const pdfBytes = await mergedPdf.save();
        const blob = new Blob([pdfBytes], { type: "application/pdf" });
        const link = document.createElement("a");
        link.href = URL.createObjectURL(blob);
        link.download = "merged_document.pdf";
        link.click();
    }

    // IMAGE COMPRESS LOGIC (Simplified for speed)
    function processImg() {
        const file = document.getElementById('img-in').files[0];
        const quality = parseFloat(document.getElementById('img-quality').value);
        const reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onload = (e) => {
            const img = new Image();
            img.src = e.target.result;
            img.onload = () => {
                const canvas = document.createElement('canvas');
                canvas.width = img.width; canvas.height = img.height;
                canvas.getContext('2d').drawImage(img, 0, 0);
                const data = canvas.toDataURL('image/jpeg', quality);
                document.getElementById('img-preview').innerHTML = `<img src="${data}" style="width:100%; border-radius:8px;"><br><a href="${data}" download="optimized.jpg">Download Optimized Image</a>`;
            };
        };
    }
</script>
</body>
</html>
