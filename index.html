<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartTool Hub | Universal Finance, PDF & Image Pro</title>
    <meta name="description" content="Calculate Loan EMI, Tenure, or Amount. Compress images and merge PDFs. All-in-one professional toolkit for finance and productivity.">
    
    <script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

    <style>
        :root { --primary: #0f172a; --accent: #2563eb; --success: #10b981; --bg: #f8fafc; --sidebar: #ffffff; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); margin: 0; display: flex; color: #1e293b; min-height: 100vh; }

        /* Sidebar UI */
        .sidebar { width: 280px; background: var(--sidebar); border-right: 1px solid #e2e8f0; padding: 30px 20px; display: flex; flex-direction: column; position: fixed; height: 100vh; }
        .sidebar h2 { color: var(--accent); font-weight: 800; margin-bottom: 40px; text-align: center; letter-spacing: -1px; }
        .nav-btn { padding: 14px 18px; margin-bottom: 8px; border-radius: 12px; cursor: pointer; display: flex; align-items: center; font-weight: 600; color: #64748b; transition: 0.3s; }
        .nav-btn:hover { background: #f1f5f9; color: var(--primary); }
        .nav-btn.active { background: var(--accent); color: white; box-shadow: 0 10px 15px -3px rgba(37, 99, 235, 0.2); }

        /* Main Content UI */
        .main-content { margin-left: 280px; flex: 1; padding: 40px; max-width: 1000px; }
        .tool-section { display: none; animation: fadeIn 0.4s ease; }
        .tool-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* AdSense Slots */
        .ad-container { background: #f1f5f9; border: 1px dashed #cbd5e1; border-radius: 12px; margin: 20px 0; text-align: center; min-height: 90px; display: flex; align-items: center; justify-content: center; color: #94a3b8; font-size: 0.8rem; overflow: hidden; }

        /* Component Styles */
        .card { background: white; padding: 35px; border-radius: 24px; border: 1px solid #e2e8f0; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05); }
        .goal-selector { display: flex; background: #f1f5f9; padding: 6px; border-radius: 14px; margin-bottom: 30px; }
        .g-btn { flex: 1; padding: 10px; border: none; border-radius: 10px; cursor: pointer; font-weight: 600; color: #64748b; transition: 0.2s; }
        .g-btn.active { background: white; color: var(--accent); box-shadow: 0 4px 6px rgba(0,0,0,0.05); }

        .input-group { margin-bottom: 20px; }
        label { display: block; font-size: 0.85rem; font-weight: 700; margin-bottom: 8px; }
        input, select { width: 100%; padding: 14px; border: 2px solid #f1f5f9; border-radius: 12px; font-size: 1rem; box-sizing: border-box; outline: none; transition: 0.3s; }
        input:focus { border-color: var(--accent); background: white; }
        .hidden { display: none; }

        button.action-btn { width: 100%; padding: 16px; background: var(--accent); color: white; border: none; border-radius: 12px; font-weight: 700; font-size: 1rem; cursor: pointer; transition: 0.3s; }
        button.action-btn:hover { filter: brightness(1.1); }

        .res-display { margin-top: 30px; background: var(--primary); border-radius: 20px; padding: 30px; color: white; display: none; }
        .res-main h1 { font-size: 2.5rem; margin: 5px 0; color: var(--success); }
        .res-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; border-top: 1px solid #334155; padding-top: 20px; }

        /* Responsive */
        @media (max-width: 800px) {
            body { flex-direction: column; }
            .sidebar { width: 100%; height: auto; position: static; padding: 20px; border-right: none; border-bottom: 1px solid #e2e8f0; }
            .main-content { margin-left: 0; padding: 20px; }
        }
    </style>
</head>
<body>

<div class="sidebar">
    <h2>SmartTool Hub</h2>
    <div class="nav-btn active" onclick="showSection('loan-sec', this)">üí∞ Universal Loan</div>
    <div class="nav-btn" onclick="showSection('img-sec', this)">üñºÔ∏è Image Optimizer</div>
    <div class="nav-btn" onclick="showSection('pdf-sec', this)">üìÑ PDF Merger</div>
    
    <div style="margin-top: auto; font-size: 0.8rem; text-align: center; color: #94a3b8;">
        <a href="privacy.html" style="color: inherit;">Privacy Policy</a> | <a href="contact.html" style="color: inherit;">Contact</a>
    </div>
</div>

<div class="main-content">
    <div class="ad-container">
        <span>Top Horizontal Ad Unit</span>
    </div>

    <div id="loan-sec" class="tool-section active">
        <div class="card">
            <h2>Universal Loan Calc</h2>
            <div class="goal-selector">
                <button class="g-btn active" onclick="setGoal('emi', this)">EMI</button>
                <button class="g-btn" onclick="setGoal('amount', this)">Amount</button>
                <button class="g-btn" onclick="setGoal('tenure', this)">Tenure</button>
            </div>

            <div id="grp-amt" class="input-group">
                <label>Loan Amount ($)</label>
                <input type="number" id="v-amt" placeholder="e.g. 1000000">
            </div>

            <div class="input-group">
                <label>Interest Rate (% Annual)</label>
                <input type="number" id="v-rate" step="0.01" placeholder="e.g. 7.5">
            </div>

            <div id="grp-ten" class="input-group">
                <label>Tenure (Years)</label>
                <input type="number" id="v-ten" placeholder="e.g. 20">
            </div>

            <div id="grp-emi" class="input-group hidden">
                <label>Desired Monthly Payment ($)</label>
                <input type="number" id="v-emi" placeholder="e.g. 5000">
            </div>

            <button class="action-btn" onclick="calculateLoan()">Analyze Loan</button>

            <div id="loan-res" class="res-display">
                <div class="res-main">
                    <small id="l-label" style="text-transform: uppercase; color: #94a3b8;">Monthly EMI</small>
                    <h1 id="l-main">$0.00</h1>
                </div>
                <div class="res-grid">
                    <div><small style="color:#94a3b8;">Total Interest</small><br><b id="l-int">$0</b></div>
                    <div><small style="color:#94a3b8;">Total Payback</small><br><b id="l-total">$0</b></div>
                </div>
            </div>
        </div>
    </div>

    <div id="img-sec" class="tool-section">
        <div class="card">
            <h2>Image Optimizer</h2>
            <div class="input-group">
                <label>Compression Level</label>
                <select id="img-q">
                    <option value="0.8">Standard (High Quality)</option>
                    <option value="0.5" selected>Balanced (Small File)</option>
                    <option value="0.2">Aggressive (Tiny File)</option>
                </select>
            </div>
            <div class="input-group">
                <label>Select Image</label>
                <input type="file" id="img-in" accept="image/*">
            </div>
            <button class="action-btn" onclick="optimizeImage()">Compress & Download</button>
            <div id="img-preview-box" style="margin-top:20px; display:none; text-align:center;">
                <p style="font-size: 0.8rem;">Preview:</p>
                <img id="img-prev" style="max-width: 100%; border-radius: 12px; border: 1px solid #ddd;">
            </div>
        </div>
    </div>

    <div id="pdf-sec" class="tool-section">
        <div class="card">
            <h2>PDF Merger Pro</h2>
            <p style="font-size:0.9rem; color:#64748b; margin-bottom:20px;">Combine multiple PDF files into one high-quality document.</p>
            <div class="input-group">
                <label>Select Multiple PDF Files</label>
                <input type="file" id="pdf-in" accept="application/pdf" multiple>
            </div>
            <button class="action-btn" style="background:var(--success);" onclick="mergePDFs()">Merge & Download PDF</button>
        </div>
    </div>

    <div class="ad-container" style="margin-top:40px;">
        <span>Footer Banner Ad Unit</span>
    </div>
</div>

<script>
    // NAVIGATION
    function showSection(id, btn) {
        document.querySelectorAll('.tool-section').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        btn.classList.add('active');
    }

    // UNIVERSAL LOAN CALCULATOR LOGIC
    let currentGoal = 'emi';
    function setGoal(goal, btn) {
        currentGoal = goal;
        document.querySelectorAll('.g-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        document.getElementById('grp-amt').classList.toggle('hidden', goal === 'amount');
        document.getElementById('grp-ten').classList.toggle('hidden', goal === 'tenure');
        document.getElementById('grp-emi').classList.toggle('hidden', goal === 'emi');
        document.getElementById('loan-res').style.display = 'none';
    }

    function calculateLoan() {
        const amt = parseFloat(document.getElementById('v-amt').value);
        const rate = parseFloat(document.getElementById('v-rate').value) / 1200;
        const years = parseFloat(document.getElementById('v-ten').value);
        const emiIn = parseFloat(document.getElementById('v-emi').value);
        const fmt = (v) => '$' + v.toLocaleString('en-US', {maximumFractionDigits: 2});

        let mainVal, totalVal, intVal, label;

        if (currentGoal === 'emi') {
            let n = years * 12;
            let emi = (amt * rate * Math.pow(1 + rate, n)) / (Math.pow(1 + rate, n) - 1);
            mainVal = fmt(emi); totalVal = emi * n; intVal = totalVal - amt; label = "Monthly EMI";
        } else if (currentGoal === 'amount') {
            let n = years * 12;
            let p = (emiIn * (Math.pow(1 + rate, n) - 1)) / (rate * Math.pow(1 + rate, n));
            mainVal = fmt(p); totalVal = emiIn * n; intVal = totalVal - p; label = "Affordable Amount";
        } else if (currentGoal === 'tenure') {
            let n = Math.log(emiIn / (emiIn - amt * rate)) / Math.log(1 + rate);
            mainVal = (n / 12).toFixed(1) + " Years"; totalVal = emiIn * n; intVal = totalVal - amt; label = "Required Tenure";
        }

        document.getElementById('l-main').innerText = mainVal;
        document.getElementById('l-int').innerText = fmt(intVal);
        document.getElementById('l-total').innerText = fmt(totalVal);
        document.getElementById('l-label').innerText = label;
        document.getElementById('loan-res').style.display = 'block';
    }

    // IMAGE OPTIMIZER LOGIC
    function optimizeImage() {
        const file = document.getElementById('img-in').files[0];
        const q = parseFloat(document.getElementById('img-q').value);
        if (!file) return alert("Select an image");

        const reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onload = (e) => {
            const img = new Image();
            img.src = e.target.result;
            img.onload = () => {
                const canvas = document.createElement('canvas');
                canvas.width = img.width; canvas.height = img.height;
                canvas.getContext('2d').drawImage(img, 0, 0);
                const optimized = canvas.toDataURL('image/jpeg', q);
                document.getElementById('img-prev').src = optimized;
                document.getElementById('img-preview-box').style.display = 'block';
                const a = document.createElement('a');
                a.href = optimized; a.download = "optimized-image.jpg"; a.click();
            };
        };
    }

    // PDF MERGER LOGIC
    async function mergePDFs() {
        const files = document.getElementById('pdf-in').files;
        if (files.length < 2) return alert("Select at least 2 PDF files");
        
        const mergedPdf = await PDFLib.PDFDocument.create();
        for (const f of files) {
            const bytes = await f.arrayBuffer();
            const pdf = await PDFLib.PDFDocument.load(bytes);
            const pages = await mergedPdf.copyPages(pdf, pdf.getPageIndices());
            pages.forEach(p => mergedPdf.addPage(p));
        }
        const pdfBytes = await mergedPdf.save();
        const blob = new Blob([pdfBytes], { type: "application/pdf" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url; a.download = "merged-files.pdf"; a.click();
    }
</script>

</body>
</html>
